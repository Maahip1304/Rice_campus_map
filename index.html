<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Rice University Campus Map — Use Mode</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600;700&family=Times+New+Roman&display=swap');
:root { 
  --marker-bg: rgba(59,130,246,0.72); 
  --marker-hover: rgba(16,185,129,0.85); 
  /* Direction-based colors */
  --north-color: #3b82f6;
  --south-color: #ef4444;
  --east-color: #f59e0b;
  --west-color: #10b981;
  --hd-color: #8b5cf6;
  --brc-color: #f97316;
  --other-color: #6b7280;
  --na-color: #374151;
}
body {
font-family: 'Crimson Text', 'Times New Roman', Times, serif;
margin: 0;
padding: 20px;
min-height: 100vh;
background: linear-gradient(135deg, #0f172a, #3b0d0d);
color: white;
 }
.container { max-width: 1200px; margin: 0 auto; }
.header { text-align: center; margin-bottom: 18px; }
.map-section {
background: #fff;
border-radius: 14px;
padding: 14px;
box-shadow: 0 20px 40px rgba(0,0,0,0.45);
position: relative;
 }
.campus-image {
width: 100%;
height: auto;
border-radius: 10px;
display: block;
user-select: none;
 }
/* marker styling: smaller, brighter, semi-transparent */
.mapped-building {
position: absolute;
width: 18px;
height: 18px;
border: 2px solid rgba(255,255,255,0.95);
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
color: white;
font-weight: 700;
font-size: 9px;
cursor: pointer;
transform: translate(-50%,-50%);
box-shadow: 0 6px 16px rgba(0,0,0,0.25);
z-index: 12;
transition: transform 0.14s ease, background 0.14s ease, box-shadow 0.14s ease;
backdrop-filter: blur(2px);
opacity: 0.95;
 }
.mapped-building:hover {
transform: translate(-50%,-50%) scale(1.35);
box-shadow: 0 10px 26px rgba(0,0,0,0.32);
 }
/* Direction-based marker colors */
.marker-north { background: var(--north-color); }
.marker-south { background: var(--south-color); }
.marker-east { background: var(--east-color); }
.marker-west { background: var(--west-color); }
.marker-hd { background: var(--hd-color); }
.marker-brc { background: var(--brc-color); }
.marker-other { background: var(--other-color); }
.marker-na { background: var(--na-color); }

/* info boxes */
.info-box {
position: absolute;
width: 340px;
border-radius: 12px;
overflow: hidden;
background: #ffffff;
color: #0f172a;
box-shadow: 0 18px 40px rgba(2,6,23,0.45);
z-index: 2000;
cursor: grab;
user-select: none;
 }
.info-box:active { cursor: grabbing; }
.info-box-header {
display: flex;
justify-content: space-between;
align-items: center;
gap: 8px;
padding: 12px 14px;
color: #fff;
font-weight: 700;
 }
/* Direction-based header colors */
.header-north { background: linear-gradient(135deg, var(--north-color), #1d4ed8); }
.header-south { background: linear-gradient(135deg, var(--south-color), #dc2626); }
.header-east { background: linear-gradient(135deg, var(--east-color), #d97706); }
.header-west { background: linear-gradient(135deg, var(--west-color), #059669); }
.header-hd { background: linear-gradient(135deg, var(--hd-color), #7c3aed); }
.header-brc { background: linear-gradient(135deg, var(--brc-color), #ea580c); }
.header-other { background: linear-gradient(135deg, var(--other-color), #4b5563); }
.header-na { background: linear-gradient(135deg, var(--na-color), #1f2937); }

.info-box-body {
padding: 12px 14px 16px;
font-size: 14px;
line-height: 1.35;
 }
.info-label { font-weight: 600; color: #374151; }
.info-row {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 6px;
 }
.info-row:last-child { margin-bottom: 0; }
.info-value { 
color: #1f2937; 
font-weight: 500;
 }
.close-btn {
background: rgba(255,255,255,0.16);
border: none;
color: white;
width: 30px;
height: 30px;
border-radius: 50%;
display: inline-flex;
align-items: center;
justify-content: center;
cursor: pointer;
font-size: 16px;
line-height: 1;
 }
/* Legend */
.legend {
position: absolute;
top: 20px;
right: 20px;
background: rgba(255, 255, 255, 0.95);
backdrop-filter: blur(10px);
border-radius: 10px;
padding: 12px;
font-size: 12px;
font-weight: 500;
color: #374151;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
z-index: 100;
}
.legend-item {
display: flex;
align-items: center;
margin-bottom: 4px;
}
.legend-item:last-child { margin-bottom: 0; }
.legend-color {
width: 12px;
height: 12px;
border-radius: 50%;
margin-right: 8px;
border: 1px solid rgba(255, 255, 255, 0.8);
}
/* small responsive adjustments */
@media (max-width: 640px) {
.info-box { width: 86vw; left: 7vw !important; }
.mapped-building { width: 16px; height: 16px; font-size: 8px;}
.legend { right: 10px; top: 10px; font-size: 11px; }
 }
</style>
</head>
<body>
<div class="container">
<div class="header">
<h1 class="text-3xl font-bold">Rice University — Campus Map</h1>
<p class="opacity-80">Click any marker to open details.</p>
</div>
<div class="map-section" id="mapSection" style="min-height:640px;">
<img id="campusMap" class="campus-image" src="Rice_Campus_Map.png"
alt="Rice University Campus Map"
onerror="this.onerror=null;this.src='https://placehold.co/1200x900/e2e8f0/64748b?text=Rice+University+Campus+Map';">

<!-- Legend -->
<div class="legend">
  <div class="legend-item">
    <div class="legend-color" style="background: var(--north-color);"></div>
    <span>North</span>
  </div>
  <div class="legend-item">
    <div class="legend-color" style="background: var(--south-color);"></div>
    <span>South</span>
  </div>
  <div class="legend-item">
    <div class="legend-color" style="background: var(--west-color);"></div>
    <span>West</span>
  </div>
  <div class="legend-item">
    <div class="legend-color" style="background: var(--hd-color);"></div>
    <span>H&D</span>
  </div>
  <div class="legend-item">
    <div class="legend-color" style="background: var(--brc-color);"></div>
    <span>BRC</span>
  </div>
  <div class="legend-item">
    <div class="legend-color" style="background: var(--other-color);"></div>
    <span>Other</span>
  </div>
  <div class="legend-item">
    <div class="legend-color" style="background: var(--na-color);"></div>
    <span>N/A</span>
  </div>
</div>
</div>
</div>
<script>
/******************************************************
 * Full inline JSON: buildings present in the legend
 * Every building has: name, size, description, x, y, year, direction
 ******************************************************/
const buildingData = {
"1": { "name":"Lovett Hall (Admission Office, Welcome Center)","size":"50,528","year":"1912","direction":"South" ,"x":72.06989411384829,"y":32.921067801624226},
"2": { "name":"Maxfield Hall (Robert and Katherine)","size":"26,686","year":"1912","direction":"North" ,"x":67.28494951801916,"y":19.36533362848714},
"3": { "name":"Will Rice College","size":"86,453","year":"2010","direction":"H&D" ,"x":61.74731346868699,"y":45.47395233907701},
"4": { "name":"Herzstein Hall","size":"52,332","year":"1914","direction":"South" ,"x":68.9534931798135,"y":31.016029676636236},
"5": { "name":"Baker College","size":"105,474","year":"2010","direction":"H&D" ,"x":62.82391209756174,"y":41.72833416545858},
"6": { "name":"Hanszen College","size":"88,819","year":"2002","direction":"H&D" ,"x":56.4215555498677,"y":45.12205013710279},
"7": { "name":"Holloway Field (Wendel D. Ley Track)","size":"3,535","year":"2015","direction":"West" ,"x":44.63214505103327,"y":56.10213960138404},
"8": { "name":"Keck Hall","size":"99,103","year":"1999","direction":"North" ,"x":64.93872365643901,"y":24.704539604676658},
"9": { "name":"Cohen House (Robert and Agnes)","size":"21,747","year":"1976","direction":"H&D" ,"x":71.59151138797884,"y":41.19297316926377},
"10": { "name":"Anderson Hall (Dean, Architecture)","size":"49,931","year":"1981","direction":"South" ,"x":64.05495920488912,"y":29.275696444508746},
"12": { "name":"Fondren Library","size":"234,327","year":"1968","direction":"South" ,"x":61.8406480358493,"y":32.966868962277026},
"13": { "name":"Huff House (Peter and Nancy, Alumni Affairs)","size":"9,434","year":"2006","direction":"North" ,"x":80.56451612903226,"y":28.218054497414535},
"14": { "name":"Tudor Fieldhouse and Youngkin Center (Autry Court, Fox Gymnasium)","size":"187,625","year":"2008","direction":"West" ,"x":42.93010834724672,"y":40.35596764519946},
"15": { "name":"Rice Stadium","size":"205,448","year":"1995","direction":"West" ,"x":25.618279980074977,"y":23.584211534097356},
"16": { "name":"Jones College (Mary Gibbs)","size":"100,380","year":"2002","direction":"H&D" ,"x":78.46774193548387,"y":20.368183264171435},
"17": { "name":"Will Rice College Magisters' House","size":"5,421","year":"1957","direction":"H&D" ,"x":60.45699088804184,"y":41.53172413723233},
"18": { "name":"Multicultural Center","size":"4,225","year":"1991","direction":"South" ,"x":60.779571533203125,"y":38.696082086528016},
"19": { "name":"Housing and Dining Offices","size":"4,611","year":"1957","direction":"H&D" ,"x":58.198926371912805,"y":39.041895799225166},
"20": { "name":"Rich Student Health Center (Morton L.)","size":"13,352","year":"2004","direction":"North" ,"x":57.91939027847782,"y":49.307096728358324},
"21": { "name":"Rice Memorial Center (Ley Student Center, Bookstore, Chapel)","size":"79,697","year":"1986","direction":"South" ,"x":54.40860379126764,"y":30.22375376878313},
"22": { "name":"Anderson Biological Laboratories","size":"101,786","year":"1967","direction":"North" ,"x":54.86559467930947,"y":25.34783994018576},
"23": { "name":"Keith-Wiess Geological Laboratories","size":"50,621","year":"1958","direction":"North" ,"x":56.048387096774185,"y":21.785997957562692},
"24": { "name":"Hamman Hall","size":"23,650","year":"1958","direction":"North" ,"x":59.34624456590222,"y":18.861746445996985},
"25": { "name":"Rayzor Hall","size":"31,528","year":"1962","direction":"South" ,"x":65.27903553417926,"y":35.926649293875506},
"26": { "name":"Facilities Engineering and Planning","size":"34,392","year":"1999","direction":"North" ,"x":70.30488967895508,"y":13.98539887807784},
"27": { "name":"Ryon Engineering Laboratory","size":"50,932","year":"1965","direction":"North" ,"x":64.24193351499497,"y":18.717258615345695},
"28": { "name":"Brown College (Margarett Root)","size":"93,068","year":"2002","direction":"H&D" ,"x":82.4462398405998,"y":23.89544007634825},
"29": { "name":"Brown College Magisters' House","size":"4,589","year":"1965","direction":"H&D" ,"x":81.63978822769657,"y":24.932868550517902},
"30": { "name":"Morton L. Rich Health and Wellness Center","size":"N/A","year":"N/A","direction":"N/A" ,"x":83.70967741935483,"y":26.07403987210452},
"31": { "name":"Oshman Engineering Design Kitchen","size":"26,400","year":"2008","direction":"North" ,"x":63.064516129032256,"y":14.731484333209059},
"32": { "name":"Space Science and Technology Building","size":"87,557","year":"1966","direction":"North" ,"x":55.403225806451616,"y":19.088683924721597},
"33": { "name":"Allen Business Center (President's Office)","size":"63,196","year":"1988","direction":"South" ,"x":68.68279733965473,"y":39.9409962555316},
"34": { "name":"Brown Hall for Mathematical Sciences (Herman)","size":"61,776","year":"1968","direction":"North" ,"x":62.39247475900957,"y":21.993483652396623},
"35": { "name":"Lovett College (Edgar Odell)","size":"100,852","year":"1968","direction":"H&D" ,"x":66.18279733965474,"y":45.19730896727238},
"36": { "name":"Greenbriar Building","size":"25,695","year":"1970","direction":"other" ,"x":12.66128907615523,"y":17.75377788556183},
"39": { "name":"Sewall Hall","size":"105,231","year":"1971","direction":"South" ,"x":70.3094482421875,"y":36.03674538688096},
"40": { "name":"Mudd Computer Science Building","size":"30,782","year":"1983","direction":"North" ,"x":62.355137486611646,"y":18.73542501232358},
"41": { "name":"Herring Hall (Robert R.)","size":"51,221","year":"1984","direction":"South" ,"x":55.66802922717391,"y":37.12733877307873},
"42": { "name":"Mechanical Engineering Building","size":"30,241","year":"1985","direction":"North" ,"x":64.51612903225806,"y":21.751419119077337},
"43": { "name":"Rice University Police Department","size":"20,985","year":"1987","direction":"South" ,"x":29.247313468686997,"y":40.701781357896614},
"44": { "name":"Brown Hall (Alice Pratt)","size":"153,502","year":"1991","direction":"West" ,"x":40.618281210622484,"y":32.64441809785868},
"45": { "name":"Brown Hall (George R.)","size":"141,543","year":"1991","direction":"North" ,"x":59.2741935483871,"y":25.00202622748861},
"46": { "name":"Duncan Hall (Anne and Charles)","size":"134,787","year":"1996","direction":"North" ,"x":70.21505540417087,"y":25.52074046457344},
"47": { "name":"Baker Hall (James A. III, Public Policy)","size":"65,135","year":"1997","direction":"West" ,"x":49.699136086825845,"y":36.06089497069473},
"48": { "name":"Butcher Hall (Dell)","size":"86,670","year":"1997","direction":"North" ,"x":52.5217164541216,"y":20.273557156739514},
"49": { "name":"Humanities Building","size":"48,987","year":"2000","direction":"South" ,"x":62.19913485627846,"y":36.33258673187066},
"50": { "name":"Reckling Park at Cameron Field","size":"43,243","year":"2018","direction":"West" ,"x":39.33588932791538,"y":44.73338868733203},
"51": { "name":"Wiess College","size":"97,566","year":"2002","direction":"H&D" ,"x":53.771371777799374,"y":47.48509409008366},
"52": { "name":"South Servery","size":"38,458","year":"2002","direction":"other" ,"x":54.01330723785329,"y":45.02498813232303},
"53": { "name":"Martel College (Marian Fox and Speros P.)","size":"110,387","year":"2002","direction":"H&D" ,"x":78.03562503587045,"y":17.108653339536122},
"54": { "name":"Martel College Magisters' House","size":"4,613","year":"2002","direction":"H&D" ,"x":77.63239926911392,"y":14.75437343762832},
"55": { "name":"Jones College Magisters' House","size":"4,473","year":"2002","direction":"H&D" ,"x":77.79831151179046,"y":22.478016541233696},
"56": { "name":"North Servery","size":"26,097","year":"2002","direction":"other" ,"x":81.02411764584275,"y":20.914440206885413},
"57": { "name":"McNair Hall (Business)","size":"182,525","year":"2002","direction":"West" ,"x":50.148807634040324,"y":30.44927096022978},
"58": { "name":"Wiess President's House","size":"16,558","year":"2004","direction":"H&D" ,"x":90.32794583228326,"y":29.7467228303156},
"59": { "name":"Greenhouse","size":"3,491","year":"2006","direction":"North" ,"x":52.18332106067288,"y":23.35222748253392},
"60": { "name":"Rice Children's Campus","size":"9,690","year":"2008","direction":"other" ,"x":8.870967741935484,"y":14.005284401290302},
"61": { "name":"Brochstein Pavilion (Raymond and Susan)","size":"7,149","year":"2008","direction":"H&D" ,"x":58.353015530493956,"y":33.38721831719665},
"62": { "name":"Gibbs Recreation and Wellness Center","size":"114,896","year":"2009","direction":"West" ,"x":49.11591068390877,"y":24.873941747356422},
"63": { "name":"BioScience Research Collaborative","size":"414,075","year":"2009","direction":"BRC" ,"x":41.253150201612904,"y":65.7104519835721},
"64": { "name":"South Plant","size":"18,038","year":"2009","direction":"West" ,"x":60.0,"y":50.0},
"65": { "name":"McMurtry College","size":"130,217","year":"2009","direction":"H&D" ,"x":74.19354838709677,"y":25.105769074905577},
"66": { "name":"McMurtry College Magisters' House","size":"4,063","year":"2009","direction":"H&D" ,"x":72.31182959771925,"y":22.8580116021786},
"67": { "name":"Duncan College (Anne and Charles)","size":"130,228","year":"2009","direction":"H&D" ,"x":74.30107855027723,"y":16.944669299411583},
"68": { "name":"Duncan College Magisters' House","size":"4,939","year":"2009","direction":"H&D" ,"x":72.15053927513861,"y":19.088683924721597},
"69": { "name":"West Servery","size":"40,995","year":"2009","direction":"other" ,"x":72.28494951801915,"y":20.74856948339304},
"70": { "name":"Seibel Servery (Abe and Annie)","size":"12,104","year":"2010","direction":"other" ,"x":64.22043338898689,"y":47.7908801526965},
"71": { "name":"Wilson House (Wiess College Magisters)","size":"4,093","year":"2011","direction":"H&D" ,"x":54.51039423686422,"y":50.80259504020035},
"72": { "name":"Brockman Hall for Physics","size":"123,227","year":"2011","direction":"North" ,"x":58.89785274382561,"y":21.509354585758054},
"73": { "name":"Turrell Skyspace at Booth Pavilion","size":"N/A","year":"N/A","direction":"N/A" ,"x":43.52150701707409,"y":33.05939581948745},
"74": { "name":"Anderson-Clarke Center (Glasscock School of Continuing Studies)","size":"56,874","year":"2014","direction":"South" ,"x":30.852995841733872,"y":37.83305241590571},
"75": { "name":"Brown Tennis Center (George R.)","size":"9,066","year":"2014","direction":"other" ,"x":32.41935483870968,"y":16.598855586714432},
"76": { "name":"Patterson Sports Performance Center (Brian)","size":"70,601","year":"2016","direction":"West" ,"x":27.843199699155747,"y":17.67910078050283},
"77": { "name":"Moody Center for the Arts","size":"64,124","year":"2017","direction":"West" ,"x":35.32258064516129,"y":42.84579598320663},
"78": { "name":"Cambridge Office Building","size":"69,659","year":"2017","direction":"South" ,"x":67.98387096774194,"y":43.53742340860093},
"79": { "name":"Central Plant","size":"27,340","year":"1912","direction":"North" ,"x":66.85483870967742,"y":17.740026908301047},
"80": { "name":"Kraft Hall for Social Sciences","size":"87,802","year":"2019","direction":"West" ,"x":49.408603791267645,"y":38.938152951808206},
"81": { "name":"Brockman Hall for Opera","size":"120,227","year":"2020","direction":"West" ,"x":36.774193548387096,"y":32.921067801624226},
"82": { "name":"Sid Richardson College","size":"148,000","year":"1970","direction":"H&D" ,"x":62.903225806451616,"y":50.211538149811155},
"83": { "name":"Waltrip Indoor Training Center","size":"80,000","year":"2019","direction":"West" ,"x":18.31119291244015,"y":17.013787907310483},
"84": { "name":"Provisional Campus Facilities (1–4)","size":"15,247","year":"2020","direction":"South" ,"x":54.35483870967742,"y":40.77093903486732},
"85": { "name":"Hanszen College Magisters' House","size":"6,082","year":"2021","direction":"H&D" ,"x":58.279571533203125,"y":41.6354669846493},
"86": { "name":"O'Connor Building for Engineering and Science (Ralph S.)","size":"250,000","year":"1980","direction":"North" ,"x":69.91935483870968,"y":20.956055178226972},
"87": { "name":"Cannady Hall (William T.)","size":"N/A","year":"N/A","direction":"N/A" ,"x":61.74731346868699,"y":29.947104065017587},
"88": { "name":"West Lot 5 MB1–MB6","size":"N/A","year":"N/A","direction":"N/A" ,"x":26.96236641176285,"y":37.00162402133213},
"89": { "name":"Sarofim Hall (Susan and Fayez)","size":"80,000","year":"1970","direction":"West" ,"x":33.817205121440274,"y":45.33562432121379},
"90": { "name":"5555 Morningside (Off-campus)","size":"15,233","year":"2019","direction":"other" ,"x":6.612903225806452,"y":13.936126724319593}
 };

/*********************************************************
 * COLOR MAPPING FUNCTIONS
 *********************************************************/
function getDirectionClass(direction) {
  const dir = direction.toLowerCase().trim();
  if (dir === 'north') return 'north';
  if (dir === 'south') return 'south';
  if (dir === 'east') return 'east';
  if (dir === 'west') return 'west';
  if (dir === 'h&d') return 'hd';
  if (dir === 'brc') return 'brc';
  if (dir === 'other') return 'other';
  return 'na'; // for N/A or unknown
}

/*********************************************************
 * RENDER MARKERS
 *********************************************************/
function renderMarkers() {
const mapSection = document.getElementById('mapSection');
Object.entries(buildingData).forEach(([id, b]) => {
const marker = document.createElement('div');
marker.className = 'mapped-building marker-' + getDirectionClass(b.direction);
marker.textContent = id;
marker.setAttribute('data-id', id);
marker.setAttribute('data-direction', b.direction);
marker.style.left = `${b.x}%`;
marker.style.top = `${b.y}%`;
// Click opens info box (allow multiple)
marker.addEventListener('click', (ev) => {
ev.stopPropagation();
openInfoBox(id, b, ev.clientX + window.scrollX, ev.clientY + window.scrollY);
 });
mapSection.appendChild(marker);
 });
 }
/*********************************************************
 * INFO BOX: create, show, draggable, closable
 *********************************************************/
function openInfoBox(id, building, pageX, pageY) {
// create box container
const box = document.createElement('div');
box.className = 'info-box';
// initial placement near click, but keep inside viewport later
const left = Math.min(Math.max(12, pageX - 120), window.innerWidth - 360);
const top = Math.min(Math.max(60, pageY - 80), window.innerHeight - 180);
box.style.left = left + 'px';
box.style.top = top + 'px';

// Get header class based on direction
const headerClass = 'header-' + getDirectionClass(building.direction);

// inner HTML with new fields
box.innerHTML = `
 <div class="info-box-header ${headerClass}" draggable="false">
 <div style="flex:1; padding-right:8px; font-size:14px; line-height:1.1;">${id}: ${escapeHtml(building.name)}</div>
 <button class="close-btn" title="Close">&times;</button>
 </div>
 <div class="info-box-body">
 <div class="info-row">
 <span class="info-label">Year Built:</span>
 <span class="info-value">${escapeHtml(building.year || 'N/A')}</span>
 </div>
 <div class="info-row">
 <span class="info-label">Size (sq ft):</span>
 <span class="info-value">${escapeHtml(building.size || 'N/A')}</span>
 </div>
 <div class="info-row">
 <span class="info-label">Direction:</span>
 <span class="info-value">${escapeHtml(building.direction || 'N/A')}</span>
 </div>
 </div>
 `;
// close
box.querySelector('.close-btn').addEventListener('click', () => box.remove());
// add to document
document.body.appendChild(box);
// make draggable (header drag)
makeElementDraggable(box);
// bring box to front on mousedown
box.addEventListener('mousedown', () => bringToFront(box));
return box;
 }
// Utility: escape HTML for safety
function escapeHtml(str) {
return String(str)
 .replace(/&/g, '&amp;')
 .replace(/"/g, '&quot;')
 .replace(/</g, '&lt;')
 .replace(/>/g, '&gt;');
 }
// z-index management
let zCounter = 3000;
function bringToFront(el) {
zCounter += 1;
el.style.zIndex = String(zCounter);
 }
// make an element draggable by its header (.info-box-header)
function makeElementDraggable(el) {
const header = el.querySelector('.info-box-header');
if (!header) return;
let isDown = false, startX = 0, startY = 0, startLeft = 0, startTop = 0;
header.addEventListener('mousedown', (e) => {
isDown = true;
bringToFront(el);
startX = e.clientX;
startY = e.clientY;
startLeft = parseInt(el.style.left || 0, 10);
startTop = parseInt(el.style.top || 0, 10);
document.addEventListener('mousemove', onMouseMove);
document.addEventListener('mouseup', onUp, { once: true });
e.preventDefault();
 });
function onMouseMove(e) {
if (!isDown) return;
const dx = e.clientX - startX;
const dy = e.clientY - startY;
el.style.left = (startLeft + dx) + 'px';
el.style.top = (startTop + dy) + 'px';
 }
function onUp() {
isDown = false;
document.removeEventListener('mousemove', onMouseMove);
 }
 }
// Close all boxes when clicking outside map + markers (optional)
document.addEventListener('click', (e) => {
// clicking outside markers does nothing by default; keep boxes unless user closes
 });
/*********************************************************
 * Initialize
 *********************************************************/
window.addEventListener('load', () => {
renderMarkers();
 });
// Optional: keyboard shortcut ESC to close topmost info box
document.addEventListener('keydown', (e) => {
if (e.key === 'Escape') {
// remove topmost info-box if any
const boxes = Array.from(document.querySelectorAll('.info-box'));
if (boxes.length) {
boxes[boxes.length - 1].remove();
 }
 }
 });
</script>
</body>
</html>
